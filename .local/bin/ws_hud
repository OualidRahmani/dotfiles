#!/usr/bin/env python3
import tkinter as tk
import sys
import os
import json

# Load theme
THEME_JSON = os.path.expanduser("~/.config/qtile_theme.json")
with open(THEME_JSON, "r") as f:
    colors = json.load(f)

ws_name = sys.argv[1] if len(sys.argv) > 1 else "?"

root = tk.Tk()
root.title("WSHud")
root.overrideredirect(True)
root.attributes('-topmost', True)
root.attributes('-type', 'notification') # Makes it behave like an overlay
root.configure(bg=colors['bg'])

# Center it
w, h = 280, 140
screen_w = 1920
screen_h = 1080
root.geometry(f"{w}x{h}+{(screen_w-w)//2}+{(screen_h-h)//2}")

# Styling
label = tk.Label(root, text=f" {ws_name} ",
                fg=colors['blue'], bg=colors['bg'], 
                font=("JetBrains Mono", 48, "bold"))
label.pack(expand=True)

# Add a subtle border in your theme's surface color
root.configure(highlightbackground=colors['surface'], highlightthickness=4)

# Self-destruct after 800ms
root.after(800, root.destroy)
root.overrideredirect(True) 
root.attributes("-alpha", 0.4) 
root.mainloop()
